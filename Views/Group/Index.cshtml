@{
	ViewData["Title"] = "Группа";

}


<div class="container d-flex justify-content-center align-middle h-full">
	<div class="col w-85 h-full m-0 mt-2">
		@await Html.PartialAsync("_PartialNavHeader.cshtml")
		@*<---------------------------------- Ученики ---------------------------------->*@
		<div class="row w-full m-0 mt-sm-3 bg-white pt-2 pb-4 d-flex justify-content-center drop-shadow">
			@for (int j = 0; j < 6; j++)
			{
				<div class="row bg-slate-100 drop-shadow mt-2" style="height:120px">
					<div class="col-1 d-flex flex-column justify-content-center align-items-center m-0 p-0">
						<span class="avatar-user hover-bg-change-slate-300 cursor-pointer"
							  style="width:30px; height:30px" data-bs-toggle="modal" data-bs-target="#exampleModal">
							<img src="~/icons/comment.svg" />
						</span>
					</div>
					<div class="col-2 d-flex flex-column justify-content-center align-items-center">
						<span class="font-medium">Евтушенко Александр</span>
						<span>13 лет</span>
					</div>
					<div class="col-7 d-flex justify-content-center align-items-center">
						<div class="row w-75 h-50">
							<div class="row h-50">
								@for (int i = 0; i < 18; i++)
								{
									<span class="square"></span>
								}
							</div>
							<div class="row h-50" style="margin-top: 4px;">
								@for (int i = 0; i < 18; i++)
								{
									<span class="square"></span>
								}
							</div>
						</div>
					</div>
					<div class="col-2 d-flex justify-content-center align-items-center">
						<div class="btn-group dropend">
							<button type="button" class="btn btn-success dropdown-toggle" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								Зачислен 10.08.2023
							</button>
							<div class="dropdown-menu relative">
								<a class="dropdown-item" href="#">Перевести</a>
								<a class="dropdown-item" href="#">Отчислить</a>
							</div>
						</div>
					</div>
				</div>
			}
		</div>
	</div>

	<!-- Modal -->
	<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Добавить заметку</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<textarea rows="5" style="width:100%" id="TITLE"></textarea>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
					<button type="button" class="btn btn-primary">Сохранить</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="editSchedule" tabindex="-1" aria-labelledby="editSchedule" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="editSchedule">Расписание</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body" id="timeSelect">
					<div class="d-flex flex-row">
						<span class="day-week" value="Понедельник">Пн</span>
						<span class="day-week" value="Вторник">Вт</span>
						<span class="day-week" value="Среда">Ср</span>
						<span class="day-week" value="Четверг">Чт</span>
						<span class="day-week" value="Пятница">Пт</span>
						<span class="day-week" value="Суббота">Сб</span>
						<span class="day-week" value="Воскресенье">Вс</span>
					</div>
					<div style="margin-top:20px">
						<div class="form-check">
							<input class="form-check-input-custom" type="checkbox">
							<label class="form-check-label" for="flexCheckDefault">
								Все уроки в одно время
							</label>
						</div>
					</div>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
					<button type="button" class="btn btn-primary">Сохранить</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="archiveGroup" tabindex="-1" aria-labelledby="archiveGroup" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-body d-flex justify-content-center align-items-center">
					<h4>Перенести группу в архив?</h4>
				</div>
				<div class="modal-footer  d-flex justify-content-center align-items-center">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
					<button type="button" class="btn btn-primary">Архивировать</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="editModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Редактировать группу</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<input type="email" class="form-control" placeholder="Название группы">
					<div class="row">
						<div class="col-6">
							<input class="form-control mt-2" list="datalistOptions" id="exampleDataList1" placeholder="Курс">
							<datalist id="datalistOptions">
								<option value="Python Pro"></option>
								<option value="Python Pro 2"></option>
								<option value="Python Start 2"></option>
								<option value="Python Start"></option>
								<option value="Геймдизайн"></option>
								<option value="Unity"></option>
								<option value="Unity++"></option>
								<option value="Scratch"></option>
								<option value="Web"></option>
								<option value="Графический дизайн"></option>
							</datalist>
							<input class="form-control mt-2" list="datalistOptions2" id="exampleDataList2" placeholder="Преподаватель">
							<datalist id="datalistOptions2">
								<option value="Калуцкий Сергей"></option>
								<option value="Иванов Петр"></option>
								<option value="Петров Иван"></option>
								<option value="Самарин Василий"></option>
								<option value="Николаев Николай"></option>
								<option value="Самарина Валя"></option>
								<option value="Котов Кот"></option>
							</datalist>
							<input class="form-control mt-2" list="datalistOptions3" id="exampleDataList3" placeholder="Куратор">
							<datalist id="datalistOptions3">
								<option value="Калуцкий Сергей"></option>
								<option value="Иванов Петр"></option>
								<option value="Петров Иван"></option>
								<option value="Самарин Василий"></option>
								<option value="Николаев Николай"></option>
								<option value="Самарина Валя"></option>
								<option value="Котов Кот"></option>
							</datalist>
							<input class="form-control mt-2" list="datalistOptions31" id="exampleDataList31" placeholder="Методист">
							<datalist id="datalistOptions31">
								<option value="Калуцкий Сергей"></option>
								<option value="Иванов Петр"></option>
								<option value="Петров Иван"></option>
								<option value="Самарин Василий"></option>
								<option value="Николаев Николай"></option>
								<option value="Самарина Валя"></option>
								<option value="Котов Кот"></option>
							</datalist>
						</div>
						<div class="col-6">
							<input class="form-control mt-2" list="datalistOptions4" id="exampleDataList4" placeholder="Тип группы">
							<datalist id="datalistOptions4">
								<option value="Мастер-класс"></option>
								<option value="Группа"></option>
								<option value="Интенсив"></option>
								<option value="Индивидуальная"></option>
								<option value="Индив. интенсив"></option>
							</datalist>
							<input class="form-control mt-2" list="datalistOptions41" id="exampleDataList41" placeholder="Язык">
							<datalist id="datalistOptions41">
								<option value="Русский"></option>
								<option value="Английский"></option>
								<option value="Казахский"></option>
							</datalist>
							<input class="form-control mt-2" list="datalistOptions411" id="exampleDataList411" placeholder="Статус">
							<datalist id="datalistOptions411">
								<option value="Набор"></option>
								<option value="Обучается"></option>
								<option value="Завершена"></option>
							</datalist>
						</div>
					</div>
					<input class="form-control mt-2" list="datalistOptions11" id="exampleDataList11" placeholder="Локация">
					<datalist id="datalistOptions11">
						<option value="Онлайн"></option>
						<option value="Алматы"></option>
						<option value="Астана"></option>
					</datalist>
					<input class="form-control mt-2" placeholder="Группа БО алгоритмики">
					<label class="form-label" style="margin-left:5px; margin-top:2px">Дата старта группы: </label>
					<input placeholder="08.09.2023" type="text" class="datepicker form-control">
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
					<button type="button" class="btn btn-primary">Сохранить</button>
				</div>
			</div>
		</div>
	</div>
	<div class="modal fade" id="addMembers" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="exampleModalLabel">Добавить учеников</h5>
					<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
				</div>
				<div class="modal-body">
					<div class="row">
						<div class="col-8">
							<input class="form-control" list="datalistOptions6" id="exampleDataList6" placeholder="Поиск ученика">
							<datalist id="datalistOptions6">
								<option value="Петров Николай"></option>
								<option value="Васильев Виктор"></option>
								<option value="Поляков Денис"></option>
								<option value="Вознесенский Дамир"></option>
								<option value="Фарихад Денис"></option>
							</datalist>
						</div>
						<div class="col-4">
							<button type="button" class="btn btn-primary">Добавить</button>
						</div>
					</div>
					<ul class="list-group mt-3">
						<li class="list-group-item" aria-disabled="true">Петров Николай +79998571894</li>
						<li class="list-group-item">Вознесенский Дамир +7987571894</li>
					</ul>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
					<button type="button" class="btn btn-primary">Сохранить</button>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	function buildTimePicker(dayOftheWeek) {
		const newDiv = document.createElement("div");
		newDiv.className = 'd-flex flex-row'
		const start = document.createElement("input");
		start.className = 'form-control'
		start.placeholder = 'Время начала'
		start.type = 'time'
		const minutes = document.createElement("input");
		minutes.className = 'form-control'
		minutes.placeholder = 'Мин.'
		const end = document.createElement("input");
		end.className = 'form-control'
		end.placeholder = 'Время конца'
		end.type = 'time'
		let i = 0
		for (const element of [newDiv, start, end, minutes]) {
			i += 1
			if (i >= 1) {
				element.style.marginLeft = '5px'
			}
			element.style.marginTop = '10px'
		}
		if (dayOftheWeek !== '') {
			const label = document.createElement("label");
			label.className = 'form-check-label d-flex align-items-center'
			label.textContent = dayOftheWeek
			newDiv.appendChild(label)
			newDiv.id = dayOftheWeek
		} else {
			newDiv.id = 'singleTime'
		}
		newDiv.appendChild(start)
		newDiv.appendChild(minutes)
		newDiv.appendChild(end)

		return newDiv
	}
	let spans = document.querySelectorAll(".day-week");
	let checkBox = document.querySelector(".form-check-input-custom");
	for (let span of spans) {
		span.addEventListener('click', () => {
			if (span.classList.contains('day-week')) {
				span.className = 'day-week-selected'
				if (checkBox.checked) return
				const newDiv = buildTimePicker(span.getAttribute('value'))
				modalDiv = document.querySelector("#timeSelect")
				modalDiv.appendChild(newDiv)
			} else {
				span.className = 'day-week'
				if (checkBox.checked) return
				const value = span.getAttribute('value')
				removeDiv = document.querySelector(`#${value}`)
				modalDiv.removeChild(removeDiv)
			}
		})
	}
	checkBox.addEventListener('change', () => {
		modalDiv = document.querySelector("#timeSelect")
		if (checkBox.checked) {
			for (let span of spans) {
				if (span.classList.contains('day-week-selected')) {
					const value = span.getAttribute('value')
					removeDiv = document.querySelector(`#${value}`)
					modalDiv.removeChild(removeDiv)
				}
			}
			const newDiv = buildTimePicker('')
			modalDiv.appendChild(newDiv)
		} else {
			removeDiv = document.querySelector(`#singleTime`)
			modalDiv.removeChild(removeDiv)
			for (let span of spans) {
				if (span.classList.contains('day-week-selected')) {
					const newDiv = buildTimePicker(span.getAttribute('value'))
					modalDiv = document.querySelector("#timeSelect")
					modalDiv.appendChild(newDiv)
				}
			}
		}
	})

</script>